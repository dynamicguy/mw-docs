<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Extensions · MajorityWorld Documentation</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## Introduction"/><meta name="docsearch:version" content="next"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Extensions · MajorityWorld Documentation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://dynamicguy.github.io/mw-docs/"/><meta property="og:description" content="## Introduction"/><meta property="og:image" content="https://dynamicguy.github.io/mw-docs/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://dynamicguy.github.io/mw-docs/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/img/saleor-icon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atelier-sulphurpool-light.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="https://dynamicguy.github.io/mw-docs/js/code-block-copy-button.js"></script><script type="text/javascript" src="https://dynamicguy.github.io/mw-docs/js/script.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/prism.css"/><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/saleor-logo.svg" alt="MajorityWorld Documentation"/></a><a href="/versions"><h3>next</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a target="_self"></a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search MajorityWorld Documentation" title="Search MajorityWorld Documentation"/></li><li class=""><a target="_self"></a></li><li class=""><a href="/docs/next/dashboard/before-you-start" target="_self">MajorityWorld Dashboard Guide</a></li><li class=""><a href="/docs/next/api/intro" target="_self">GraphQL API</a></li><li class="siteNavGroupActive"><a href="/docs/next/getting-started/intro" target="_self">Running your MajorityWorld Server</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Advanced</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Running your Saleor Server</h3><ul class=""><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Getting started</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/getting-started/intro">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/next/getting-started/installation-macos">Installation for macOS</a></li><li class="navListItem"><a class="navItem" href="/docs/next/getting-started/installation-windows">Installation for Windows</a></li><li class="navListItem"><a class="navItem" href="/docs/next/getting-started/installation-linux">Installation for Linux</a></li><li class="navListItem"><a class="navItem" href="/docs/next/getting-started/docker">Using Docker</a></li><li class="navListItem"><a class="navItem" href="/docs/next/getting-started/creating-superuser">Creating Administrator Account</a></li><li class="navListItem"><a class="navItem" href="/docs/next/getting-started/example-data">Example Data</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Configuring Saleor</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/customization/intro">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/next/customization/environment-variables">Environment Variables</a></li><li class="navListItem"><a class="navItem" href="/docs/next/customization/emails">Customizing Emails</a></li><li class="navListItem"><a class="navItem" href="/docs/next/customization/money">Handling Money Amounts</a></li><li class="navListItem"><a class="navItem" href="/docs/next/customization/password-validation">Password Validation</a></li><li class="navListItem"><a class="navItem" href="/docs/next/customization/thumbnails">Thumbnails</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Integrations</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/integrations/intro">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/next/integrations/payment-gateways">Supported Payment Gateways</a></li><li class="navListItem"><a class="navItem" href="/docs/next/integrations/elasticsearch">Elasticsearch</a></li><li class="navListItem"><a class="navItem" href="/docs/next/integrations/googleanalytics">Google Analytics</a></li><li class="navListItem"><a class="navItem" href="/docs/next/integrations/googleforretail">Google for Retail</a></li><li class="navListItem"><a class="navItem" href="/docs/next/integrations/openexchangerates">Open Exchange Rates</a></li><li class="navListItem"><a class="navItem" href="/docs/next/integrations/recaptcha">reCAPTCHA</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Deployment</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/deployment/intro">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/next/deployment/docker">Docker</a></li><li class="navListItem"><a class="navItem" href="/docs/next/deployment/heroku">Heroku</a></li><li class="navListItem"><a class="navItem" href="/docs/next/deployment/s3">Storing Files on Amazon S3</a></li><li class="navListItem"><a class="navItem" href="/docs/next/deployment/gcs">Storing Files on Google Cloud Storage (GCS)</a></li><li class="navListItem"><a class="navItem" href="/docs/next/deployment/sentry">Error Tracking with Sentry</a></li><li class="navListItem"><a class="navItem" href="/docs/next/deployment/continuous-integration">Continuous Integration</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Contributing Guides</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/contributing/intro">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/next/contributing/editorconfig">EditorConfig</a></li><li class="navListItem"><a class="navItem" href="/docs/next/contributing/coding-style">Coding Style</a></li><li class="navListItem"><a class="navItem" href="/docs/next/contributing/naming">Naming Conventions</a></li><li class="navListItem"><a class="navItem" href="/docs/next/contributing/writing-commit-message">Writing Good Commit Messages</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Advanced</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/advanced/intro">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/next/advanced/running-tests">Running Tests</a></li><li class="navListItem"><a class="navItem" href="/docs/next/advanced/managing-dependencies">Managing Dependencies</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/next/advanced/extensions">Extensions</a></li><li class="navListItem"><a class="navItem" href="/docs/next/advanced/debug-tools">Debug Tools</a></li><li class="navListItem"><a class="navItem" href="/docs/next/advanced/events">Events</a></li><li class="navListItem"><a class="navItem" href="/docs/next/advanced/internationalization">Internationalization and Translation</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Guides</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/guides/payments">How to Integrate New Payment Gateway</a></li><li class="navListItem"><a class="navItem" href="/docs/next/guides/taxes">How to Configure Taxes</a></li><li class="navListItem"><a class="navItem" href="/docs/next/guides/email-integration">Email Configuration and Integration</a></li></ul></div></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/dynamicguy/mw-docs/edit/master/docs/advanced/extensions.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">Extensions</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="introduction"></a><a href="#introduction" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h2>
<p>MajorityWorld is built based on extensions architecture. It includes hooks for most standard operations, such as the calculation of prices in the checkout or calling certain actions when an order has been created.</p>
<p>MajorityWorld arrives with some plugins already implemented by default. These plugins are located in <code>saleor.extensions.plugins</code>.
To provide the <code>ExtensionManager</code> with a list of enabled plugins, include the Python plugin path in the <code>settings.PLUGINS</code> list.</p>
<h3><a class="anchor" aria-hidden="true" id="tips-on-writing-your-own-plugin"></a><a href="#tips-on-writing-your-own-plugin" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tips on writing your own plugin</h3>
<p>Make sure that a custom plugin inherits from the <code>BasePlugin</code> class and that it overwrites base methods.
You can write your plugin as a class which has callable instances, like the one below:</p>
<pre><code class="hljs css language-python"><span class="hljs-comment"># custom/plugin.py</span>

<span class="hljs-keyword">from</span> django.conf <span class="hljs-keyword">import</span> settings
<span class="hljs-keyword">from</span> urllib.parse <span class="hljs-keyword">import</span> urljoin

<span class="hljs-keyword">from</span> ...base_plugin <span class="hljs-keyword">import</span> BasePlugin
<span class="hljs-keyword">from</span> .tasks <span class="hljs-keyword">import</span> api_post_request_task

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomPlugin</span><span class="hljs-params">(BasePlugin)</span>:</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(self, *args, **kwargs)</span>:</span>
        super().__init__(*args, **kwargs)
        self._enabled = bool(settings.CUSTOM_PLUGIN_KEYS)


    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">postprocess_order_creation</span><span class="hljs-params">(self, order: <span class="hljs-string">"Order"</span>, previous_value: Any)</span>:</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self._enabled:
            <span class="hljs-keyword">return</span>
        data = {}

        transaction_url = urljoin(settings.CUSTOM_API_URL, <span class="hljs-string">"transactions/createoradjust"</span>)
        api_post_request_task.delay(transaction_url, data)
</code></pre>
<blockquote>
<p><strong>Note</strong></p>
<p>There is no need to implement all base methods as the <code>ExtensionManager</code> will use default values for methods that are not implemented.</p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="activating-your-plugin"></a><a href="#activating-your-plugin" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Activating your plugin</h3>
<p>To activate the new plugin, add it to the <code>settings.PLUGINS</code> list in your Django settings:</p>
<pre><code class="hljs css language-python"><span class="hljs-comment"># settings.py</span>

PLUGINS = [<span class="hljs-string">"saleor.extensions.plugins.custom.CustomPlugin"</span>, ]
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="configuring-plugins"></a><a href="#configuring-plugins" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Configuring plugins</h3>
<p>MajorityWorld allows you to change the configuration of any given plugin over API. The plugin owner needs to overwrite a method to create a structure of default configuration <code>_get_default_configuration</code> and <code>CONFIG_STRUCTURE</code>. The plugin configuration received from API can be validated by overwriting the <code>validate_plugin_configuration</code> method. It requires an expected structure as in the following example:</p>
<pre><code class="hljs css language-python"><span class="hljs-comment"># custom/plugin.py</span>

<span class="hljs-keyword">from</span> django.utils.translation <span class="hljs-keyword">import</span> pgettext_lazy

<span class="hljs-keyword">from</span> saleor.extensions <span class="hljs-keyword">import</span> ConfigurationTypeField

CONFIG_STRUCTURE = {
    <span class="hljs-string">"Username or account"</span>: {
        <span class="hljs-string">"type"</span>: ConfigurationTypeField.STRING,
        <span class="hljs-string">"help_text"</span>: pgettext_lazy(
            <span class="hljs-string">"Plugin help text"</span>, <span class="hljs-string">"Provide user or account details"</span>
        ),
        <span class="hljs-string">"label"</span>: pgettext_lazy(<span class="hljs-string">"Plugin label"</span>, <span class="hljs-string">"Username or account"</span>),
    },
    <span class="hljs-string">"Password or license"</span>: {
        <span class="hljs-string">"type"</span>: ConfigurationTypeField.STRING,
        <span class="hljs-string">"help_text"</span>: pgettext_lazy(
            <span class="hljs-string">"Plugin help text"</span>, <span class="hljs-string">"Provide password or license details"</span>
        ),
        <span class="hljs-string">"label"</span>: pgettext_lazy(<span class="hljs-string">"Plugin label"</span>, <span class="hljs-string">"Password or license"</span>),
    }
}

<span class="hljs-meta">@classmethod</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">validate_plugin_configuration</span><span class="hljs-params">(cls, plugin_configuration: <span class="hljs-string">"PluginConfiguration"</span>)</span>:</span>
    <span class="hljs-string">"""Validate if provided configuration is correct."""</span>
    missing_fields = []
    configuration = plugin_configuration.configuration
    configuration = {item[<span class="hljs-string">"name"</span>]: item[<span class="hljs-string">"value"</span>] <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> configuration}
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> configuration[<span class="hljs-string">"Username or account"</span>]:
        missing_fields.append(<span class="hljs-string">"Username or account"</span>)
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> configuration[<span class="hljs-string">"Password or license"</span>]:
        missing_fields.append(<span class="hljs-string">"Password or license"</span>)

    <span class="hljs-keyword">if</span> plugin_configuration.active <span class="hljs-keyword">and</span> missing_fields:
        error_msg = (
            <span class="hljs-string">"To enable a plugin, you need to provide values for the "</span>
            <span class="hljs-string">"following fields: "</span>
        )
        <span class="hljs-keyword">raise</span> ValidationError(error_msg + <span class="hljs-string">", "</span>.join(missing_fields))

<span class="hljs-meta">@classmethod</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">_get_default_configuration</span><span class="hljs-params">(cls)</span>:</span>
    defaults = {
        <span class="hljs-string">"name"</span>: cls.PLUGIN_NAME,
        <span class="hljs-string">"description"</span>: <span class="hljs-string">""</span>,
        <span class="hljs-string">"active"</span>: <span class="hljs-literal">False</span>,
        <span class="hljs-string">"configuration"</span>: [
            {
                <span class="hljs-string">"name"</span>: <span class="hljs-string">"Username or account"</span>,
                <span class="hljs-string">"value"</span>: <span class="hljs-string">""</span>,
            },
            {
                <span class="hljs-string">"name"</span>: <span class="hljs-string">"Password or license"</span>,
                <span class="hljs-string">"value"</span>: <span class="hljs-string">""</span>,
            },
        ]
    }
    <span class="hljs-keyword">return</span> defaults
</code></pre>
<p><code>ExtensionManager</code> will use this data to create default configuration in DB which will be served by the API.</p>
<p>By using GraphQL queries, the <code>pluginConfigurations</code> and <code>pluginConfiguration</code> user will be able to list all enabled plugins. Mutation <code>pluginConfigurationUpdate</code> will allow the user to active, disable and update configuration fields like <code>API keys</code> for a  given plugin. The API serves a response with the given fields:</p>
<table>
<thead>
<tr><th>Name</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>id</code></td><td>Id of the plugin</td></tr>
<tr><td><code>name</code></td><td>Name of the plugin</td></tr>
<tr><td><code>active</code></td><td>Indicates if the plugin is activated or not</td></tr>
<tr><td><code>description</code></td><td>Description of the plugin</td></tr>
<tr><td><code>configuration</code></td><td>Stores all configuration fields as a list that can be changed by a user</td></tr>
</tbody>
</table>
<p>Configuration fields:</p>
<table>
<thead>
<tr><th>Name</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>name</code></td><td>Name of the field</td></tr>
<tr><td><code>value</code></td><td>Current value of the field</td></tr>
<tr><td><code>type</code></td><td>Type of the field. MajorityWorld supports <code>String</code> and <code>Boolean</code></td></tr>
<tr><td><code>helpText</code></td><td>Description of the field</td></tr>
<tr><td><code>label</code></td><td>Label for the field</td></tr>
</tbody>
</table>
<blockquote>
<p><strong>Note</strong></p>
<p>Once you have completed the above configuration, as a plugin owner, you can decide to display certain configuration options in the Plugins page in the dashboard's Configuration section of MajorityWorld.</p>
<p>This allows dashboard users to manage the plugin's basic setup. The scope of the setup available via Plugins page is up to you.</p>
<p>See the <a href="/docs/next/dashboard/configuration/plugins">Plugins</a> topic for more information.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="about-extensions-manager"></a><a href="#about-extensions-manager" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>About Extensions Manager</h2>
<p>The <code>ExtensionsManager</code> is located in the <code>saleor.core.extensions.manager</code>. It is a class responsible for handling all declared plugins and serving a response from them. In case of a non-declared plugin, it serves a default response.
It is possible to overwrite an <code>ExtensionsManager</code> class by implementing it on its own. MajorityWorld will discover the manager class by taking the declared path from <code>settings.EXTENSIONS_MANAGER</code>.
Each Django request object has its own manager included as the <code>extensions</code> field. It is attached in the MajorityWorld middleware.</p>
<h2><a class="anchor" aria-hidden="true" id="base-plugin"></a><a href="#base-plugin" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Base plugin</h2>
<p>The <code>BasePlugin</code> is located in the <code>saleor.extensions.base_plugin</code>.
It serves as an abstract class for storing all methods available for any plugin. All methods use the <code>previous_value</code> parameter. It contains a value calculated by the previous plugin in the queue.
If the plugin is first in line, it will use the default value calculated by the manager.</p>
<h2><a class="anchor" aria-hidden="true" id="celery-tasks"></a><a href="#celery-tasks" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Celery tasks</h2>
<p>Some plugin operations should be done asynchronously. If MajorityWorld has Celery enabled, it will discover all tasks declared in <code>tasks.py</code> in the plugin directories.</p>
<h3><a class="anchor" aria-hidden="true" id="pluginpy"></a><a href="#pluginpy" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>plugin.py</code></h3>
<pre><code class="hljs css language-python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">postprocess_order_creation</span><span class="hljs-params">(self, order: <span class="hljs-string">"Order"</span>, previous_value: Any)</span>:</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self._enabled:
        <span class="hljs-keyword">return</span>
    data = {}
    transaction_url = urljoin(get_api_url(), <span class="hljs-string">"transactions/createoradjust"</span>)

    api_post_request_task.delay(transaction_url, data)
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="taskspy"></a><a href="#taskspy" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>tasks.py</code></h3>
<pre><code class="hljs css language-python"><span class="hljs-keyword">import</span> json
<span class="hljs-keyword">from</span> celery <span class="hljs-keyword">import</span> shared_task
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> Any, Dict

<span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">from</span> requests.auth <span class="hljs-keyword">import</span> HTTPBasicAuth
<span class="hljs-keyword">from</span> django.conf <span class="hljs-keyword">import</span> settings


<span class="hljs-meta">@shared_task</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">api_post_request</span><span class="hljs-params">(
    url: str,
    data: Dict[str, Any],
)</span>:</span>
    <span class="hljs-keyword">try</span>:
        username = <span class="hljs-string">"username"</span>
        password = <span class="hljs-string">"password"</span>
        auth = HTTPBasicAuth(username, password)
        requests.post(url, auth=auth, data=json.dumps(data), timeout=settings.TIMEOUT)
    <span class="hljs-keyword">except</span> requests.exceptions.RequestException:
        <span class="hljs-keyword">return</span>
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/next/advanced/managing-dependencies"><span class="arrow-prev">← </span><span>Managing Dependencies</span></a><a class="docs-next button" href="/docs/next/advanced/debug-tools"><span>Debug Tools</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#introduction">Introduction</a><ul class="toc-headings"><li><a href="#tips-on-writing-your-own-plugin">Tips on writing your own plugin</a></li><li><a href="#activating-your-plugin">Activating your plugin</a></li><li><a href="#configuring-plugins">Configuring plugins</a></li></ul></li><li><a href="#about-extensions-manager">About Extensions Manager</a></li><li><a href="#base-plugin">Base plugin</a></li><li><a href="#celery-tasks">Celery tasks</a><ul class="toc-headings"><li><a href="#pluginpy"><code>plugin.py</code></a></li><li><a href="#taskspy"><code>tasks.py</code></a></li></ul></li></ul></nav></div><footer class="docs-footer"><div class="wrapper"><div class="docs-footer-top"><div class="newsletter"><span>Get updates from MajorityWorld:</span><div id="mc_embed_signup"><form action="https://MajorityWorld.us19.list-manage.com/subscribe/post?u=8bd6297e7e63c06d9c242a92d&amp;id=f8dadd63b8" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate=""><div id="mc_embed_signup_scroll"><div class="mc-field-group newsletter-input-wrapper"><input type="email" value="" name="EMAIL" class="required email newsletter-input" id="mce-EMAIL" placeholder="Email address"/><small></small><div class="clear"><input type="submit" value="Sign up" name="Sign up" id="mc-embedded-subscribe" class="newsletter-submit-button"/></div></div><div id="mce-responses" class="clear"><div class="response" id="mce-error-response" style="display:none"></div><div class="response" id="mce-success-response" style="display:none"></div></div><div style="position:absolute;left:-5000px" aria-hidden="true"><input type="text" name="b_8bd6297e7e63c06d9c242a92d_f8dadd63b8" tabindex="-1" value=""/></div></div></form></div><script type="text/javascript" src="//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js"></script></div><div class="social-icons"><span>Contact us:</span><a class="twitter-icon" href="https://twitter.com/MajorityWorld" target="_blank"><img src="/img/twitter-icon.svg" alt="MajorityWorld Documentation" height="29" width="30"/></a><a class="fb-icon" href="https://www.facebook.com/MajorityWorld/" target="_blank"><img src="/img/facebook-icon.svg" alt="MajorityWorld Documentation" height="29" width="30"/></a><a class="so-icon" href="https://spectrum.chat/MajorityWorld" target="_blank"><img src="/img/stackoverflow-icon.svg" alt="MajorityWorld Documentation" height="29" width="30"/></a><a class="github-icon" href="https://github.com/dynamicguy/MajorityWorld" target="_blank"><img src="/img/github-icon.svg" alt="MajorityWorld Documentation" height="29" width="30"/></a></div></div><div class="dosc-footer-copyrights"><div class="copyrights"><span>Copyright © 2019</span><span><a href="https://dynamicguy.com" target="_blank">Dynamic Guy</a></span></div><div class="dosc-footer-links"><a href="https://MajorityWorld.com/privacy-policy-terms-and-conditions" target="_blank">Terms of use</a><a href="https://MajorityWorld.com/privacy-policy-terms-and-conditions/" target="_blank">Privacy policy</a></div></div><link rel="stylesheet" href="https://use.typekit.net/itf4hxr.css"/></div></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '33843c1b27663cc760ddc60811ba51d7',
                indexName: 'mw-docs',
                inputSelector: '#search_input_react'
              });
            </script></body></html>