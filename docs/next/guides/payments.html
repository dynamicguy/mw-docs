<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>How to Integrate New Payment Gateway · MajorityWorld Documentation</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## Introduction"/><meta name="docsearch:version" content="next"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="How to Integrate New Payment Gateway · MajorityWorld Documentation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://dynamicguy.github.io/mw-docs/"/><meta property="og:description" content="## Introduction"/><meta property="og:image" content="https://dynamicguy.github.io/mw-docs/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://dynamicguy.github.io/mw-docs/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/img/saleor-icon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atelier-sulphurpool-light.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="https://dynamicguy.github.io/mw-docs/js/code-block-copy-button.js"></script><script type="text/javascript" src="https://dynamicguy.github.io/mw-docs/js/script.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/prism.css"/><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/saleor-logo.svg" alt="MajorityWorld Documentation"/></a><a href="/versions"><h3>next</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a target="_self"></a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search MajorityWorld Documentation" title="Search MajorityWorld Documentation"/></li><li class=""><a target="_self"></a></li><li class=""><a href="/docs/next/dashboard/before-you-start" target="_self">MajorityWorld Dashboard Guide</a></li><li class=""><a href="/docs/next/api/intro" target="_self">GraphQL API</a></li><li class="siteNavGroupActive"><a href="/docs/next/getting-started/intro" target="_self">Running your MajorityWorld Server</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Guides</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Running your Saleor Server</h3><ul class=""><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Getting started</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/getting-started/intro">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/next/getting-started/installation-macos">Installation for macOS</a></li><li class="navListItem"><a class="navItem" href="/docs/next/getting-started/installation-windows">Installation for Windows</a></li><li class="navListItem"><a class="navItem" href="/docs/next/getting-started/installation-linux">Installation for Linux</a></li><li class="navListItem"><a class="navItem" href="/docs/next/getting-started/docker">Using Docker</a></li><li class="navListItem"><a class="navItem" href="/docs/next/getting-started/creating-superuser">Creating Administrator Account</a></li><li class="navListItem"><a class="navItem" href="/docs/next/getting-started/example-data">Example Data</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Configuring Saleor</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/customization/intro">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/next/customization/environment-variables">Environment Variables</a></li><li class="navListItem"><a class="navItem" href="/docs/next/customization/emails">Customizing Emails</a></li><li class="navListItem"><a class="navItem" href="/docs/next/customization/money">Handling Money Amounts</a></li><li class="navListItem"><a class="navItem" href="/docs/next/customization/password-validation">Password Validation</a></li><li class="navListItem"><a class="navItem" href="/docs/next/customization/thumbnails">Thumbnails</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Integrations</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/integrations/intro">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/next/integrations/payment-gateways">Supported Payment Gateways</a></li><li class="navListItem"><a class="navItem" href="/docs/next/integrations/elasticsearch">Elasticsearch</a></li><li class="navListItem"><a class="navItem" href="/docs/next/integrations/googleanalytics">Google Analytics</a></li><li class="navListItem"><a class="navItem" href="/docs/next/integrations/googleforretail">Google for Retail</a></li><li class="navListItem"><a class="navItem" href="/docs/next/integrations/openexchangerates">Open Exchange Rates</a></li><li class="navListItem"><a class="navItem" href="/docs/next/integrations/recaptcha">reCAPTCHA</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Deployment</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/deployment/intro">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/next/deployment/docker">Docker</a></li><li class="navListItem"><a class="navItem" href="/docs/next/deployment/heroku">Heroku</a></li><li class="navListItem"><a class="navItem" href="/docs/next/deployment/s3">Storing Files on Amazon S3</a></li><li class="navListItem"><a class="navItem" href="/docs/next/deployment/gcs">Storing Files on Google Cloud Storage (GCS)</a></li><li class="navListItem"><a class="navItem" href="/docs/next/deployment/sentry">Error Tracking with Sentry</a></li><li class="navListItem"><a class="navItem" href="/docs/next/deployment/continuous-integration">Continuous Integration</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Contributing Guides</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/contributing/intro">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/next/contributing/editorconfig">EditorConfig</a></li><li class="navListItem"><a class="navItem" href="/docs/next/contributing/coding-style">Coding Style</a></li><li class="navListItem"><a class="navItem" href="/docs/next/contributing/naming">Naming Conventions</a></li><li class="navListItem"><a class="navItem" href="/docs/next/contributing/writing-commit-message">Writing Good Commit Messages</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Advanced</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/advanced/intro">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/next/advanced/running-tests">Running Tests</a></li><li class="navListItem"><a class="navItem" href="/docs/next/advanced/managing-dependencies">Managing Dependencies</a></li><li class="navListItem"><a class="navItem" href="/docs/next/advanced/extensions">Extensions</a></li><li class="navListItem"><a class="navItem" href="/docs/next/advanced/debug-tools">Debug Tools</a></li><li class="navListItem"><a class="navItem" href="/docs/next/advanced/events">Events</a></li><li class="navListItem"><a class="navItem" href="/docs/next/advanced/internationalization">Internationalization and Translation</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Guides</h4><ul><li class="navListItem navListItemActive"><a class="navItem" href="/docs/next/guides/payments">How to Integrate New Payment Gateway</a></li><li class="navListItem"><a class="navItem" href="/docs/next/guides/taxes">How to Configure Taxes</a></li><li class="navListItem"><a class="navItem" href="/docs/next/guides/email-integration">Email Configuration and Integration</a></li></ul></div></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/dynamicguy/mw-docs/edit/master/docs/guides/payments.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">How to Integrate New Payment Gateway</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="introduction"></a><a href="#introduction" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h2>
<p>For more details on the payment platforms supported in MajorityWorld, see the <a href="/docs/next/integrations/payment-gateways">Supported Payment Gateways</a> topic.</p>
<h2><a class="anchor" aria-hidden="true" id="how-to-integrate-a-new-payment-gateway-into-majorityworld"></a><a href="#how-to-integrate-a-new-payment-gateway-into-majorityworld" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How to integrate a new payment gateway into MajorityWorld</h2>
<p>MajorityWorld uses a universal flow that each gateway should fulfill. There are several methods that should be implemented.</p>
<p>Your changes should be stored in the <code>saleor.payment.gateways.&lt;gateway name&gt;</code> package.</p>
<p>A plugin.py file is required in this location. The file contains an implementation of the plugin to this specific payment gateway. For more information on the plugin implementation methods, see plugin.py file for existing Stripe or Braintree implementation</p>
<blockquote>
<p><strong>Note</strong></p>
<p>After completing the steps, you will also need to integrate your payment gateway into your SPA Storefront’s workflow.</p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="client-token"></a><a href="#client-token" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Client token</h3>
<p><code>get_client_token</code> - A client token is a signed data blob that includes configuration and authorization information required by the payment gateway.</p>
<p>Client tokens should not be reused; a new client token should be generated for each payment request.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>All the payment methods receive <code>payment_information</code> as a dataclass: <code>PaymentData</code>.</p>
<p>You are in charge of configuring your gateway. Based on the existing implementations, you may use the <code>GatewayConfig</code> class to configure your plugin.</p>
<p>For more information on how to configure your plugin, see the <a href="/docs/next/dashboard/configuration/plugins">Plugins</a> topic.</p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="authorize-payment"></a><a href="#authorize-payment" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Authorize payment</h3>
<p><code>authorize(payment_information)</code> - Authorization is a process of reserving the amount of money against the customer’s funding source. The money does not change hands until the authorization is captured.</p>
<h3><a class="anchor" aria-hidden="true" id="refund"></a><a href="#refund" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Refund</h3>
<p><code>refund(payment_information)</code> - A refund is a full or partial return of captured funds to the customer.</p>
<h3><a class="anchor" aria-hidden="true" id="capture-payment"></a><a href="#capture-payment" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Capture payment</h3>
<p><code>capture(payment_information)</code> - A transfer of the money that was reserved during the authorization stage.</p>
<h3><a class="anchor" aria-hidden="true" id="void"></a><a href="#void" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Void</h3>
<p><code>void(payment_information)</code> - A cancellation of a pending authorization or capture.</p>
<h3><a class="anchor" aria-hidden="true" id="process-payment"></a><a href="#process-payment" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Process payment</h3>
<p><code>process_payment(payment_information)</code> - Used for the checkout process, it should perform all the necessary steps to process a payment. It should use already-defined functions, like authorize and capture.</p>
<h4><a class="anchor" aria-hidden="true" id="paymentdata"></a><a href="#paymentdata" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>PaymentData</code></h4>
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>amount</code></td><td><code>Decimal</code></td><td>Amount to be authorized/captured/charged/refunded</td></tr>
<tr><td><code>currency</code></td><td><code>str</code></td><td>The currency used in this transaction</td></tr>
<tr><td><code>billing</code></td><td><code>AddressData</code></td><td>Billing information</td></tr>
<tr><td><code>shipping</code></td><td><code>AddressData</code></td><td>Shipping information</td></tr>
<tr><td><code>order_id</code></td><td><code>int</code></td><td>Order ID</td></tr>
<tr><td><code>customer_ip_address</code></td><td><code>str</code></td><td>IP address of the customer</td></tr>
<tr><td><code>customer_email</code></td><td><code>str</code></td><td>Email address of the customer</td></tr>
<tr><td><code>token</code></td><td><code>str</code></td><td>Token used for transaction, provided by the gateway</td></tr>
<tr><td><code>reuse_source</code></td><td><code>bool</code></td><td>Indicates that if a payment method for this user has already been stored in payment service, the system should use this payment method</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="addressdata"></a><a href="#addressdata" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>AddressData</code></h4>
<table>
<thead>
<tr><th>Name</th><th>Type</th></tr>
</thead>
<tbody>
<tr><td><code>first_name</code></td><td><code>str</code></td></tr>
<tr><td><code>last_name</code></td><td><code>str</code></td></tr>
<tr><td><code>company_name</code></td><td><code>str</code></td></tr>
<tr><td><code>street_address_1</code></td><td><code>str</code></td></tr>
<tr><td><code>street_address_2</code></td><td><code>str</code></td></tr>
<tr><td><code>city</code></td><td><code>str</code></td></tr>
<tr><td><code>city_area</code></td><td><code>str</code></td></tr>
<tr><td><code>postal_code</code></td><td><code>str</code></td></tr>
<tr><td><code>country</code></td><td><code>str</code></td></tr>
<tr><td><code>country_area</code></td><td><code>str</code></td></tr>
<tr><td><code>phone</code></td><td><code>str</code></td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="gatewayconfig"></a><a href="#gatewayconfig" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>GatewayConfig</code></h4>
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>auto_capture</code></td><td><code>bool</code></td><td>Define if a gateway should also capture funds from the card. If false, payment should be only authorized</td></tr>
<tr><td><code>template_path</code></td><td><code>str</code></td><td>Path to a template that will be rendered for the checkout</td></tr>
<tr><td><code>connection_params</code></td><td><code>dict</code></td><td>List of parameters used for connecting to the payment’s gateway</td></tr>
<tr><td><code>store_customer</code></td><td><code>bool</code></td><td>If set to True, the system will save this payment method for this customer</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="returns"></a><a href="#returns" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Returns</h3>
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>gateway_response</code></td><td><code>GatewayResponse</code></td><td>GatewayResponse containing details about every transaction, with <code>is_success</code> set to <code>True</code> if no error occurred</td></tr>
<tr><td><code>client_token</code></td><td><code>str</code></td><td>Unique client token that will be used as an identifier in the payment process</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="gatewayresponse"></a><a href="#gatewayresponse" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>GatewayResponse</code></h4>
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>transaction_id</code></td><td><code>str</code></td><td>Transaction ID as returned by the gateway</td></tr>
<tr><td><code>kind</code></td><td><code>str</code></td><td>Transaction kind, one of: auth, capture, charge, refund, void</td></tr>
<tr><td><code>is_success</code></td><td><code>bool</code></td><td>Status showing whether the transaction was successful or not</td></tr>
<tr><td><code>amount</code></td><td><code>Decimal</code></td><td>Amount that the gateway actually charged or authorized</td></tr>
<tr><td><code>currency</code></td><td><code>str</code></td><td>Currency in which the gateway charged, needs to be an ISO 4217 code</td></tr>
<tr><td><code>error</code></td><td><code>str</code></td><td>An error message, if one occurred. Should be <code>None</code> if no error occurred</td></tr>
<tr><td><code>raw_response</code></td><td><code>dict</code></td><td>Raw gateway response as a dict object. By default it is <code>None</code></td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="handling-errors"></a><a href="#handling-errors" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Handling errors</h2>
<p>Gateway-specific errors should be parsed to MajorityWorld’s universal format.</p>
<h3><a class="anchor" aria-hidden="true" id="transaction-errors"></a><a href="#transaction-errors" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Transaction errors</h3>
<p>MajorityWorld unifies error codes across all gateways.</p>
<table>
<thead>
<tr><th>Code</th><th>Graphql API Value</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>incorrect_number</code></td><td><code>INCORRECT_NUMBER</code></td><td>Incorrect card number</td></tr>
<tr><td><code>invalid_number</code></td><td><code>INVALID_NUMBER</code></td><td>Invalid card number</td></tr>
<tr><td><code>incorrect_cvv</code></td><td><code>INCORRECT_CVV</code></td><td>Incorrect CVV (or CVC)</td></tr>
<tr><td><code>invalid_cvv</code></td><td><code>INVALID_CVV</code></td><td>Invalid CVV (or CVC)</td></tr>
<tr><td><code>incorrect_zip</code></td><td><code>INCORRECT_ZIP</code></td><td>Incorrect postal code</td></tr>
<tr><td><code>incorrect_address</code></td><td><code>INCORRECT_ADDRESS</code></td><td>Incorrect address (excluding postal code)</td></tr>
<tr><td><code>invalid_expiry_date</code></td><td><code>INVALID_EXPIRY_DATE</code></td><td>Incorrect card expiration date</td></tr>
<tr><td><code>expired</code></td><td><code>EXPIRED</code></td><td>Expired payment method token</td></tr>
<tr><td><code>declined</code></td><td><code>DECLINED</code></td><td>Transaction was declined by the gateway</td></tr>
<tr><td><code>processing_error</code></td><td><code>PROCESSING_ERROR</code></td><td>Default error used for all cases not covered above</td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="how-to-add-a-payment-method-to-the-old-checkout-optional"></a><a href="#how-to-add-a-payment-method-to-the-old-checkout-optional" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How to add a payment method to the old checkout (optional)</h2>
<p>If you are not using SPA Storefront, there are some additional steps you need to perform to enable the payment method in your checkout flow.</p>
<h3><a class="anchor" aria-hidden="true" id="add-a-form"></a><a href="#add-a-form" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Add a form</h3>
<p>Payment on the storefront is handled via a payment form which should implement all the steps necessary for the payment to succeed. The form must implement a <code>get_payment_token</code> that returns a token required to process payments. All payment forms should inherit from <code>django.forms.Form</code>.</p>
<p>Your changes should reside under <code>saleor.payment.gateways.&lt;gateway name&gt;.forms.py</code>.</p>
<p><strong>Example</strong></p>
<pre><code class="hljs css language-python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BraintreePaymentForm</span><span class="hljs-params">(forms.Form)</span>:</span>
    amount = forms.DecimalField()
    payment_method_nonce = forms.CharField()

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_payment_token</span><span class="hljs-params">(self)</span>:</span>
        <span class="hljs-keyword">return</span> self.cleaned_data[<span class="hljs-string">"payment_method_nonce"</span>]
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="implement"></a><a href="#implement" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Implement</h3>
<p><code>create_form(data, payment_information)</code> - Should return the form that will be used for the checkout process.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>Should be added as a part of the provider’s methods.</p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="implement-template-path"></a><a href="#implement-template-path" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Implement template path</h3>
<p><code>template_path</code> - Should specify a path to a template that will be rendered for the checkout.</p>
<pre><code class="hljs css language-python">PAYMENT_GATEWAYS = {
    DUMMY: {
        <span class="hljs-string">"config"</span>: {
            <span class="hljs-string">"template_path"</span>: <span class="hljs-string">"order/payment/dummy.html"</span>,
        },
    },
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="add-template"></a><a href="#add-template" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Add template</h3>
<p>Add a new template to handle the payment process with your payment form. Your changes should live under <code>saleor.templates.order.payment.&lt;gateway name&gt;.html</code>.</p>
<blockquote>
<p><strong>Tip</strong></p>
<p>Whenever possible, use <code>currency</code> and <code>amount</code> as <strong>returned</strong> by the payment gateway, <strong>not</strong> the one that was sent to it. It may happen that a gateway (eg. Braintree) is set to a different currency than your shop. In such cases, you may want to charge the customer 70 dollars but, due to gateway misconfiguration, the charge will be 70 Euros. Such situation is then handled and an adequate error is given.</p>
</blockquote>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/next/advanced/internationalization"><span class="arrow-prev">← </span><span>Internationalization and Translation</span></a><a class="docs-next button" href="/docs/next/guides/taxes"><span>How to Configure Taxes</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#introduction">Introduction</a></li><li><a href="#how-to-integrate-a-new-payment-gateway-into-majorityworld">How to integrate a new payment gateway into MajorityWorld</a><ul class="toc-headings"><li><a href="#client-token">Client token</a></li><li><a href="#authorize-payment">Authorize payment</a></li><li><a href="#refund">Refund</a></li><li><a href="#capture-payment">Capture payment</a></li><li><a href="#void">Void</a></li><li><a href="#process-payment">Process payment</a></li><li><a href="#returns">Returns</a></li></ul></li><li><a href="#handling-errors">Handling errors</a><ul class="toc-headings"><li><a href="#transaction-errors">Transaction errors</a></li></ul></li><li><a href="#how-to-add-a-payment-method-to-the-old-checkout-optional">How to add a payment method to the old checkout (optional)</a><ul class="toc-headings"><li><a href="#add-a-form">Add a form</a></li><li><a href="#implement">Implement</a></li><li><a href="#implement-template-path">Implement template path</a></li><li><a href="#add-template">Add template</a></li></ul></li></ul></nav></div><footer class="docs-footer"><div class="wrapper"><div class="docs-footer-top"><div class="newsletter"><span>Get updates from MajorityWorld:</span><div id="mc_embed_signup"><form action="https://MajorityWorld.us19.list-manage.com/subscribe/post?u=8bd6297e7e63c06d9c242a92d&amp;id=f8dadd63b8" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate=""><div id="mc_embed_signup_scroll"><div class="mc-field-group newsletter-input-wrapper"><input type="email" value="" name="EMAIL" class="required email newsletter-input" id="mce-EMAIL" placeholder="Email address"/><small></small><div class="clear"><input type="submit" value="Sign up" name="Sign up" id="mc-embedded-subscribe" class="newsletter-submit-button"/></div></div><div id="mce-responses" class="clear"><div class="response" id="mce-error-response" style="display:none"></div><div class="response" id="mce-success-response" style="display:none"></div></div><div style="position:absolute;left:-5000px" aria-hidden="true"><input type="text" name="b_8bd6297e7e63c06d9c242a92d_f8dadd63b8" tabindex="-1" value=""/></div></div></form></div><script type="text/javascript" src="//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js"></script></div><div class="social-icons"><span>Contact us:</span><a class="twitter-icon" href="https://twitter.com/MajorityWorld" target="_blank"><img src="/img/twitter-icon.svg" alt="MajorityWorld Documentation" height="29" width="30"/></a><a class="fb-icon" href="https://www.facebook.com/MajorityWorld/" target="_blank"><img src="/img/facebook-icon.svg" alt="MajorityWorld Documentation" height="29" width="30"/></a><a class="so-icon" href="https://spectrum.chat/MajorityWorld" target="_blank"><img src="/img/stackoverflow-icon.svg" alt="MajorityWorld Documentation" height="29" width="30"/></a><a class="github-icon" href="https://github.com/dynamicguy/MajorityWorld" target="_blank"><img src="/img/github-icon.svg" alt="MajorityWorld Documentation" height="29" width="30"/></a></div></div><div class="dosc-footer-copyrights"><div class="copyrights"><span>Copyright © 2019</span><span><a href="https://dynamicguy.com" target="_blank">Dynamic Guy</a></span></div><div class="dosc-footer-links"><a href="https://MajorityWorld.com/privacy-policy-terms-and-conditions" target="_blank">Terms of use</a><a href="https://MajorityWorld.com/privacy-policy-terms-and-conditions/" target="_blank">Privacy policy</a></div></div><link rel="stylesheet" href="https://use.typekit.net/itf4hxr.css"/></div></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '33843c1b27663cc760ddc60811ba51d7',
                indexName: 'mw-docs',
                inputSelector: '#search_input_react'
              });
            </script></body></html>